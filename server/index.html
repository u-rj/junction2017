<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css" />
    <title>Server</title>
    <style>
        .header{
            color: #ee6e73;
        }
    </style>
</head>
<body class="container">
    <div class="cardpanel">
        <h2 class="header">サーバー仕様</h2>
        <p>サーバに送信するときは*-in サーバーから受け取るときは*-outを指定する</p>
        <table class="bordered">
            <thead>
                <tr>
                    <th>ソケット名</th>
                    <th>データ形式</th>
                    <th>説明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>command-in<br>command-out</td>
                    <td>
                        {"name":"command1", "data": 2}
                    </td>
                    <td>汎用的なデータを保存を行う。nameはクライアントの取り決めで自由に指定できる。dataの指定がない場合は最後に送信されたデータを返す</td>
                </tr>
                <tr>
                    <td>emotion-in<br>emotion-out</td>
                    <td>
                        {"name":"face", "data": 2}
                    </td>
                    <td>感情データを統計する。nameはsentence(文章), face(顔パラメータ)の指定をする。データがない場合は、現在の感情データを返す</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="cardpanel">
        <h2 class="header">送信テスト</h2>
        <p></p>
        <table class="bordered">
            <thead>
                <tr>
                    <th>ソケット名</th>
                    <th>発火</th>
                    <!--<th>説明</th>-->
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>command-in</td>
                    <td>
                        <a class="waves-effect waves-light btn command-in-fire-1">Fire1</a>
                        <a class="waves-effect waves-light btn command-in-fire-2">Fire2</a>
                        <a class="waves-effect waves-light btn command-in-empty">No Data</a>
                    </td>
                    <!--<td>nameはクライアントの取り決めで自由に指定できる</td>-->
                </tr>
                <tr>
                    <td>emotion-in</td>
                    <td>
                        <a class="waves-effect waves-light btn emotion-in-face">Face</a>
                        <a class="waves-effect waves-light btn emotion-in-sentence">Sentence</a>
                        <a class="waves-effect waves-light btn emotion-in-empty">Empty</a>
                    </td>
                    <!--<td>nameはsentence(文章), face(顔パラメータ)の指定をする</td>-->
                </tr>
            </tbody>
        </table>
    </div>



    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    <script>
      $(function() {
        var socket = io.connect('http://192.168.10.100:8000');
        socket.on("connect", function() {
            console.log('connected');

            //command-in/ command-out
            //----------------------------------------
            socket.on('command-out', function(data) {
                console.log('command-out', data);
            });

            $('.command-in-fire-1').click(function(){
                socket.emit('command-in', {
                    name: 'command1',
                    data: {"data": 3}
                });
            });
            $('.command-in-fire-2').click(function(){
                socket.emit('command-in', {
                    name: 'command1',
                    data: {"data": 5}
                });
            });

            $('.command-in-empty').click(function(){
                socket.emit('command-in', {
                    name: 'command1',
                });
            });


            //command-in/ command-out
            //----------------------------------------
            socket.on('emotion-out', function(data) {
                console.log('emotion-out', data);
            });

            $('.emotion-in-face').click(function(){
                socket.emit('emotion-in', {
                    name: 'face',
                    data: 0.15
                });
            });

            $('.emotion-in-sentence').click(function(){
                socket.emit('emotion-in', {
                    name: 'sentence',
                    data: 0.2
                });
            });

            $('.emotion-in-empty').click(function(){
                socket.emit('emotion-in', {
                    name: 'empty',
                });
            });

        } );



      });
    </script>
</body>
</html>
